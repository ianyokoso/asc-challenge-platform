/**
 * 애플리케이션 버전 관리
 * 
 * 버전 형식: MAJOR.MINOR.PATCH
 * - MAJOR: 주요 기능 변경 또는 호환성 깨짐
 * - MINOR: 새로운 기능 추가
 * - PATCH: 버그 수정 및 작은 개선
 */

export const APP_VERSION = '1.5.0';

export const VERSION_HISTORY = [
  {
    version: '1.5.0',
    date: '2025-01-10',
    changes: [
      '트랙 제외 시 외래 키 제약 조건 오류 해결',
      '인증 레코드 보존 (user_track_id를 NULL로 설정)',
      '트랙 개별 제거 기능 안정화 (4개→3개→2개→1개→0개)',
      '에러 메시지 개선 및 상세 로깅 추가',
      '트랙 변경 시 멤버 인증 기록 유지',
    ],
  },
  {
    version: '1.4.5',
    date: '2025-01-10',
    changes: [
      '트랙 없는 사용자 인증 페이지 메시지 개선',
      '"참여 중인 트랙이 없습니다" 안내 추가',
      '관리자 트랙 제외 기능 완성 (관리 버튼 통해 접근)',
      '트랙 배정/제외 시스템 최종 안정화',
    ],
  },
  {
    version: '1.4.4',
    date: '2025-01-10',
    changes: [
      '트랙 배정 다이얼로그 실시간 업데이트 수정',
      '트랙 제거 후 다이얼로그 상태 즉시 반영',
      '사용자 트랙 정보 깊이 있는 비교로 업데이트 감지',
      '다이얼로그 닫힐 때 상태 초기화 추가',
    ],
  },
  {
    version: '1.4.3',
    date: '2025-01-10',
    changes: [
      '모든 트랙 제거 가능하도록 변경',
      '트랙이 없는 사용자 "트랙 추가 대기중" 상태로 표시',
      '트랙 배정 시스템 완전 유연화',
      '사용자 관리 테이블 트랙 표시 개선',
    ],
  },
  {
    version: '1.4.2',
    date: '2025-01-10',
    changes: [
      '트랙 배정 시 최소 1개 이상 선택 필수로 변경',
      '트랙 개별 제거 기능 개선 (3개 중 1개 제거 가능)',
      '저장 버튼 선택 트랙 없을 시 비활성화',
      '트랙 선택 유효성 검사 추가 및 안내 메시지 표시',
    ],
  },
  {
    version: '1.4.1',
    date: '2025-01-10',
    changes: [
      '관리자 페이지 트랙 제외 기능 오류 수정',
      'assignUserToTracks 함수 빈 배열 처리 개선',
      '트랙 배정 실패 시 디버깅 로그 추가',
      '토스트 메시지 개선 (트랙 제거 시 적절한 메시지 표시)',
    ],
  },
  {
    version: '1.4.0',
    date: '2025-01-10',
    changes: [
      '트랙 선택 페이지(/tracks) 완전 제거',
      '트랙이 없는 사용자용 관리자 문의 페이지 추가',
      '관리자 페이지에서 기존 트랙 선택 상태 표시 개선',
      '네비게이션에서 트랙 페이지 링크 제거',
      '사용자 자동 리다이렉트 로직 추가',
    ],
  },
  {
    version: '1.3.5',
    date: '2025-01-10',
    changes: [
      '트랙 페이지 무한 로딩 문제 해결',
      'useUserAccess 훅 타임아웃 개선 (5초)',
      '인증 제출 로직 디버깅 로그 추가',
      'submitCertification 함수 오류 처리 개선',
    ],
  },
  {
    version: '1.3.4',
    date: '2025-10-10',
    changes: [
      '트랙 페이지 클라이언트 사이드 예외 오류 수정',
      'CSS 클래스 표준 Tailwind CSS로 변경',
      'TrackAccessDenied 컴포넌트 스타일 개선',
      '트랙 등록 플로우 안정화',
    ],
  },
  {
    version: '1.3.3',
    date: '2025-10-10',
    changes: [
      '메인 페이지 전체 기능 복원 (Hero, Features, Tracks, CTA 섹션)',
      '로그인 페이지 완전 복원 (데모 계정, 이용약관, Supabase 설정 경고)',
      'OAuth 콜백 처리 안정화 및 디버깅 로그 정리',
      '로그인 후 자동으로 /certify 페이지로 리다이렉트 유지',
    ],
  },
  {
    version: '1.3.2',
    date: '2025-10-10',
    changes: [
      '로그인 성공 후 인증 페이지로 자동 리다이렉트',
      '인증 페이지 이동 버튼 추가',
      '로그인 플로우 개선',
    ],
  },
  {
    version: '1.3.1',
    date: '2025-10-10',
    changes: [
      'OAuth 콜백 쿠키 처리 개선',
      '로그인 상태 실시간 표시',
      '로그아웃 기능 추가',
      '콜백 디버깅 로그 추가',
    ],
  },
  {
    version: '1.3.0',
    date: '2025-10-10',
    changes: [
      '로그인 테스트를 위한 UI 단순화',
      '메인 페이지 모든 섹션 제거',
      '로그인 페이지 간소화',
      '불필요한 기능 모두 제거',
    ],
  },
  {
    version: '1.2.6',
    date: '2025-10-10',
    changes: [
      '로그인 세션 관리 문제 긴급 수정',
      'OAuth 콜백 후 쿠키 설정 개선',
      '세션 갱신 로직 강화',
      '미들웨어 세션 처리 개선',
    ],
  },
  {
    version: '1.2.5',
    date: '2025-10-10',
    changes: [
      '로그인 디버깅 코드 롤백',
      '깔끔한 로그인 플로우 복원',
      '불필요한 콘솔 로그 제거',
    ],
  },
  {
    version: '1.2.0',
    date: '2025-10-10',
    changes: [
      '코드 리팩토링 (컴포넌트 분리)',
      '관리자 기능 모듈화',
      '커스텀 훅 추출',
      '상수 관리 개선',
    ],
  },
  {
    version: '1.1.0',
    date: '2025-10-10',
    changes: [
      '관리자 트랙 배정 기능 추가',
      '트랙 배정 Dialog 구현',
      '관리 버튼 활성화',
      '새 사용자 트랙 선택 제한',
    ],
  },
  {
    version: '1.0.0',
    date: '2025-10-10',
    changes: [
      '초기 출시',
      'Discord OAuth2 인증',
      '4가지 트랙 시스템',
      '관리자 페이지',
    ],
  },
] as const;

export function getLatestVersion() {
  return VERSION_HISTORY[0];
}

export function getVersionInfo() {
  return {
    current: APP_VERSION,
    latest: getLatestVersion(),
    history: VERSION_HISTORY,
  };
}

